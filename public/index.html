<!doctype html>
<html>
  <head>
    <title>Whiskers</title>
    <link rel="icon" type="image/png" href="/emojis/1.png" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/css/style.css" />
  </head>
  <body>
    <nav>
      <svg
        width="30px"
        height="30px"
        class="user"
        onclick="goto('/pages/user')"
        src="/media/image/profile.png"
      >
      <a id="home" href="/">
        <img class="logo" src="/media/image/logo.png">
        Whiskers
      </a>
      <img
        width="30px"
        height="30px"
        class="settings"
        onclick="goto('/pages/settings')"
        src="/media/image/settings.png"
      >
    </nav>
    <div class="center">
      <center>
        <h2>Join a chat</h2>
        <input placeholder="Chat ID" id="id" type="text" autocomplete="off" />
        <button onclick="goto('/chats/'+document.getElementById('id').value)">
          Join
        </button>
      </center>
      <div class="lined">OR</div>
      <center>
        <h2>Create a new chat</h2>
        <input placeholder="Chat name" type="text" id="chatName" autocomplete="off" />
        <button onclick="create()">Create</button>
      </center>
    </div>
  </body>
  <script src="/js/script.js"></script>
  <script src="/js/all.js"></script>
  <script>
    function creater() {
      let author = localStorage.getItem("name");
      let name = document.getElementById("chatName").value;
      if(!name) return
      fetch("/api/new", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          username: author,
          chatName: name,
        })
      })
        .then((res) => res.json())
        .then((data) => {
          if (data.res == "Success") {
            goto("/chats/" + data.chatId);
          } else {
            notif(data.error);
          }
        });
    }
  </script>
</html>
